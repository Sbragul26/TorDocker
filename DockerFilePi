# To build the container in arm Architecture
#============================================

FROM archlinux:latest

ENV TZ=Asia/Dhaka

COPY service_start.sh /service_start.sh

RUN pacman -Syu --noconfirm && \
    ln -sf /usr/share/zoneinfo/$TZ /etc/localtime && \
    echo $TZ > /etc/timezone && \
    pacman -S --noconfirm tor nginx nano curl && \
    chmod +x /service_start.sh && \
    pacman -Scc --noconfirm

COPY torrc /etc/tor/torrc
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80 443 9050

ENTRYPOINT ["/service_start.sh"]
